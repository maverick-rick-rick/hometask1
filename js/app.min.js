!function(){"use strict";var e={type:"text",idName:"create_note_name",placeholder:"Type here...",labelContent:"Enter your note name",required:!0},t={name:"create_note_category",idName:"create_note_category",optionValues:["Task","Random thought","Idea","Quote"],labelContent:"Choose a category of your note",value:"Task"},n={type:"textarea",idName:"create_note_content",placeholder:"Type here...",labelContent:"Enter your note content here...",required:!0},a={type:"submit",idName:"create_note_submit",placeholder:"",labelContent:"If it`s all right, press submit button below",value:"Create a note"},r=[{role:"edit",pic:"pencil"},{role:"archive",pic:"archive"}],o={name:"Name",created:"Created",category:"Category",content:"Content",deadlines:"Deadlines"},i={category:"Note category",active:"Active",archived:"Archived"},c={newNoteForm:{newInput:function(e){var t=document.createElement("label"),n=document.createElement("input");n.setAttribute("type",e.type),n.setAttribute("id",e.idName),n.setAttribute("placeholder",e.placeholder),e.value&&n.setAttribute("value",e.value),e.required&&n.setAttribute("required",""),t.setAttribute("for",e.idName),t.innerText=e.labelContent;var a=document.createDocumentFragment();return a.appendChild(t),a.appendChild(n),a},newSelect:function(e){var t=document.createElement("label"),n=document.createElement("select");n.setAttribute("name",e.name),n.setAttribute("id",e.idName),n.setAttribute("value",e.optionValues[0]),e.optionValues.forEach((function(e){var t=document.createElement("option");t.setAttribute("value",e),t.innerText=e,n.append(t)})),t.setAttribute("for",e.idName),t.innerText=e.labelContent;var a=document.createDocumentFragment();return a.appendChild(t),a.appendChild(n),a},formStructure:function(e){var t=document.createElement("form");return t.setAttribute("id","create_note_form"),t.setAttribute("action","#"),t.classList.add("create_note"),e.forEach((function(e){t.append(e)})),t}},newTableRow:{roundedIcon:function(e){var t=document.createElement("div");return t.classList.add("rounded_icon"),t.innerHTML='<svg><use href="./images/dist/sprite.svg#svg-'.concat(e,'"></use></svg>'),t},tableButton:function(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("btn-".concat(e.role)),t.innerHTML='<svg><use href="./images/dist/sprite.svg#svg-'.concat(e.pic,'"></use></svg>'),t},tableRow:function(e,t){var n=document.createElement("div");n.classList.add("table_row"),t.headline&&n.classList.add("table_headline");for(var a=Object.entries(e),o=0;o<a.length;o++){var i=document.createElement("div");if(i.classList.add("table_row-item"),!t.headline&&0==o){console.log();var d=e.category.toLowerCase();d=d.replace(/ /gi,"_");var l=c.newTableRow.roundedIcon(d);i.append(l)}var s=document.createElement("p");i.append(s),s.innerText="".concat(a[o][1]),n.append(i)}if(t.buttons){var u=document.createElement("div");u.classList.add("table_row-item"),u.classList.add("table_row-buttons"),t.headline&&u.classList.add("table_headline-buttons"),r.forEach((function(e){var t=c.newTableRow.tableButton(e);u.append(t)})),n.append(u)}return n}}},d={noteForm:[c.newNoteForm.newInput(e),c.newNoteForm.newSelect(t),c.newNoteForm.newInput(n),c.newNoteForm.newInput(a)]},l={visibleNotes:[{name:"Shopping list",created:"September 14, 2022",category:"Task",content:"Peanut, butter",deadlines:""},{name:"Climb a tree",created:"September 22, 2022",category:"Random thought",content:"My neighbour have a bonsai tree...",deadlines:"Start: 12.03.2022\nEnd: 12.10.2022"},{name:"Take a shower",created:"September 17, 2022",category:"Idea",content:"Or not...",deadlines:""},{name:"Winter is coming",created:"September 14, 2022",category:"Quote",content:"Eddard Stark",deadlines:""},{name:"To do",created:"February 14, 2022",category:"Random thought",content:"Ya bado bado",deadlines:""},{name:"Buy a island",created:"April 22, 2022",category:"Idea",content:"On the Caribbean",deadlines:""},{name:"It`s awesome",created:"August 12, 2022",category:"Quote",content:"Cartman",deadlines:""},{name:"Something cool",created:"October 17, 2022",category:"Random thought",content:"=__=",deadlines:"Start: 17.07.2022\nEnd: 18.10.2022"}],archivedNotes:[{name:"Shopping list",created:"September 14, 2022",category:"Task",content:"Peanut, butter",deadlines:""},{name:"Climb a tree",created:"September 22, 2022",category:"Random thought",content:"My neighbour have a bonsai tree...",deadlines:"Start: 22.05.2022\nEnd: 13.10.2022"},{name:"Take a shower",created:"September 17, 2022",category:"Idea",content:"Or not...",deadlines:""},{name:"Winter is coming",created:"September 14, 2022",category:"Quote",content:"Eddard Stark",deadlines:""}]};function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e){var t=Object.values(e),n=[];t.forEach((function(e){n.push(function(e){var t=[];return e.forEach((function(e){t.push(e.category)})),t}(e))}));var a=n[0].sort(),r=n[1].sort();function o(e){for(var t=[],n=1,a=0;a<e.length;a++)e[a]==e[a+1]?n+=1:(t.push(n),n=1);return t}return n=n.flat(1).sort(),function(e,t,n){for(var a=[],r=0;r<e.length;r++){var o={};null==t[r]&&(t[r]=0),null==n[r]&&(n[r]=0),o.category=e[r],o.visible=t[r],o.archived=n[r],a.push(o)}return a}(Array.from(new Set(n)),o(a),o(r))}function m(e){var t=e.querySelector("#create_note_name").value,n=e.querySelector("#create_note_category").value,a=e.querySelector("#create_note_content").value;var r,o,i,c,d,l,u=(r=new Date,o=r.getFullYear(),i=r.toLocaleString("en",{month:"long"}),c=r.getDate(),(d=[]).push(i," ",c,", ",o),d.join("")),v=a.match(/(\d{1,4}([./-])\d{1,2}([./-])\d{1,4})/g);try{l=function(){var e,t=[];if((e=t).push.apply(e,arguments),0==t||null==t)return t=[];t.length>2&&t.splice(1,t.length-2),t.length<2&&t.push("deadlineless");var n=/([./-])/gi;return t.forEach((function(e,a){e=e.replaceAll(n,"."),t[a]=e})),t[0]="Start: "+t[0],t[1]="End: "+t[1],t=t.join("\n")}.apply(void 0,s(v))}catch(e){"stringEntries is not iterable (cannot read property null)"==e.message?l="":console.log(e)}return{name:t,created:u,category:n,content:a,deadlines:l}}var p,b=(p=d.noteForm,c.newNoteForm.formStructure(p));function h(e,t){for(var n=e.querySelector(".table_content"),a=0;a<t.length;a++){var r=c.newTableRow.tableRow(t[a],{headline:!1,buttons:!0});r.dataset.index=a,n.append(r)}return n}function f(e,t){var n=document.createElement("div");n.classList.add("table"),n.dataset.type=t;var a=c.newTableRow.tableRow(o,{headline:!0,buttons:!0});n.append(a);var r=document.createElement("div");return r.classList.add("table_content"),n.append(r),n.append(h(n,e)),n}function g(){var e=document.querySelector('.table[data-type="visible"]'),t=document.querySelector('.table[data-type="archived"]');function n(e){var t,n=e.dataset.type;"visible"==n&&(t=l.visibleNotes),"archived"==n&&(t=l.archivedNotes),e.querySelector(".table_content").innerHTML="";var a=h(e,t);e.append(a)}n(e),t&&n(t)}function y(e,t){e.forEach((function(e){var n=c.newTableRow.tableRow(e,{headline:!1,buttons:!1});t.append(n)}))}var _=function(e){var t=document.createElement("div");t.classList.add("table"),t.classList.add("table_quantity");var n=c.newTableRow.tableRow(i,{headline:!0,buttons:!1});t.append(n);var a=document.createElement("div");return a.classList.add("table_content"),y(e,a),t.append(a),t}(v(l));function w(e,t){!function(e,t){var n,a;"visible"==t?(n=l.visibleNotes,a=l.archivedNotes):"archived"==t&&(a=l.visibleNotes,n=l.archivedNotes);try{var r=n[e];a.push(r),n.splice(e,1)}catch(e){console.log("ERROR : Undefined incoming `val` parameter or false `index` parameter")}}(e,t)}function L(e,t,n){!function(e,t,n){var a;"visible"==n&&(a=l.visibleNotes[t]),"archived"==n&&(a=l.archivedNotes[t]),a.name=e.name,a.created=e.created,a.category=e.category,a.content=e.content,a.deadlines=e.deadlines}(m(e),t,n)}document.addEventListener("DOMContentLoaded",(function(){var e,t,n=document.querySelector(".popup"),a=document.getElementById("popup_close"),r=document.getElementById("add_new_note"),o=document.querySelector(".note_list > .container"),i=document.querySelector(".note_categories > .container"),d=n.querySelector(".popup_content");e=o,(t=f(l.visibleNotes,"visible")).querySelector(".table_headline-buttons").firstChild.remove(),e.append(t),i.append(_),r.addEventListener("click",(function(){d.innerHTML="",b.reset(),d.append(b),n.classList.remove("hidden");var e=o.querySelector(".table_content");b.addEventListener("submit",(function t(a){a.preventDefault();var r=function(e){var t=m(e);l.visibleNotes.push(t);var n=l.visibleNotes[l.visibleNotes.length-1],a=c.newTableRow.tableRow(n,{headline:!1,buttons:!0});return a.dataset.index=l.visibleNotes.length-1,a}(b);e.append(r),n.classList.add("hidden"),d.innerHTML="",b.removeEventListener("submit",t,!1)}),!1)}));var s=document.querySelector(".table_headline-buttons > .btn-archive");s.addEventListener("click",(function(){d.innerHTML="",function(e){var t=f(l.archivedNotes,"archived");e.append(t)}(d),n.classList.remove("hidden")})),document.addEventListener("click",(function(e){var t=e.target.classList.contains("btn-archive");if(!t||e.target.closest(".table_headline-buttons"))return!1;if(t){var n=e.target.closest(".table_row"),a=e.target.closest(".table").dataset.type;w(n.dataset.index,a),g(),function(e){var t=e.querySelector(".table_content");t.innerHTML="",y(v(l),t)}(document.querySelector(".table_quantity"))}})),document.addEventListener("click",(function(e){var t,a,r,o=e.target.classList.contains("btn-edit");if(!o)return!1;if(o){var i=e.target.closest(".table_row"),c=e.target.closest(".table").dataset.type,s=i.dataset.index;d.innerHTML="";var u=(t=s,"visible"==(a=c)&&(r=l.visibleNotes[t]),"archived"==a&&(r=l.archivedNotes[t]),b.reset(),b.querySelector("#create_note_name").value=r.name,b.querySelector("#create_note_category").value=r.category,b.querySelector("#create_note_content").value=r.content,console.log(b),b);d.append(u),n.classList.remove("hidden"),u.addEventListener("submit",(function e(t){t.preventDefault(),L(u,s,c),n.classList.add("hidden"),d.innerHTML="",g(),u.removeEventListener("submit",e,!1)}),!1)}})),a.addEventListener("click",(function(){this.closest(".popup").classList.add("hidden")})),window.addEventListener("click",(function(e){if(e.target==r||e.target==s||e.target.closest(".popup")||e.target.classList.contains("btn"))return!1;n.classList.add("hidden")}))}))}();